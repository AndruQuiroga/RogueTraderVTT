<div class="rt-specialist-panel">
    {{#each skillLists.specialist as |entry|}}
    <div class="rt-specialist-group" data-skill="{{entry.[0]}}">
        <!-- Group Header -->
        <div class="rt-specialist-header">
            <span class="rt-specialist-name">{{entry.[1].label}}</span>
            <span class="rt-specialist-char">{{entry.[1].characteristic}}</span>
            <button type="button" class="rt-specialist-add add-skill" data-skill="{{entry.[0]}}" title="Add {{entry.[1].label}} specialization">
                <i class="fas fa-plus"></i>
            </button>
        </div>
        
        <!-- Entries -->
        <div class="rt-specialist-entries">
            {{#if entry.[1].entries.length}}
                {{#each entry.[1].entries as |spec idx|}}
                <div class="rt-specialist-entry" data-skill="{{../entry.[0]}}" data-index="{{idx}}">
                    <div class="rt-spec-name">
                        <input type="text" 
                               name="system.skills.{{../entry.[0]}}.entries.{{idx}}.name" 
                               value="{{spec.name}}" 
                               placeholder="Specialization..." />
                    </div>
                    <div class="rt-spec-training">
                        <button type="button" class="rt-train-btn {{#if spec.trained}}active{{/if}}" 
                                data-field="system.skills.{{../entry.[0]}}.entries.{{idx}}.trained"
                                data-value="{{spec.trained}}"
                                title="Trained (+10)">T</button>
                        <button type="button" class="rt-train-btn {{#if spec.plus10}}active{{/if}}"
                                data-field="system.skills.{{../entry.[0]}}.entries.{{idx}}.plus10"
                                data-value="{{spec.plus10}}"
                                title="+10 (+20)">+10</button>
                        <button type="button" class="rt-train-btn {{#if spec.plus20}}active{{/if}}"
                                data-field="system.skills.{{../entry.[0]}}.entries.{{idx}}.plus20"
                                data-value="{{spec.plus20}}"
                                title="+20 (+30)">+20</button>
                    </div>
                    <div class="rt-spec-bonus">
                        <input type="number" 
                               name="system.skills.{{../entry.[0]}}.entries.{{idx}}.bonus" 
                               value="{{spec.bonus}}" 
                               data-dtype="Number" />
                    </div>
                    <div class="rt-spec-total">{{spec.current}}</div>
                    <div class="rt-spec-actions">
                        <button type="button" class="rt-spec-roll roll-skill" 
                                data-skill="{{../entry.[0]}}" 
                                data-specialty="{{idx}}" 
                                title="Roll {{spec.name}}">
                            <i class="fas fa-dice-d20"></i>
                        </button>
                        <button type="button" class="rt-spec-delete delete-specialization" 
                                data-skill="{{../entry.[0]}}" 
                                data-index="{{idx}}" 
                                title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
                {{/each}}
            {{else}}
                <div class="rt-specialist-empty">
                    <span>No specializations yet</span>
                </div>
            {{/if}}
        </div>
    </div>
    {{/each}}
</div>
