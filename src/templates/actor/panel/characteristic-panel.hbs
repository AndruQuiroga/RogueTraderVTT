{{!-- Compact Characteristics Panel - Expandable Rows --}}
<div class="rt-panel rt-char-panel">
    <h1 class="rt-panel-header">
        Characteristics
        <button type="button" 
                class="rt-char-setup-btn" 
                data-action="openCharacteristicSetup"
                title="{{localize 'RT.CharacteristicSetup.OpenSetup'}}">
            <i class="fa-solid fa-sliders"></i>
        </button>
    </h1>
    <div class="rt-char-list">
        {{#each actor.characteristics as |characteristic name|}}
            {{!-- Filter out Influence (Inf) - not a real RT characteristic --}}
            {{#unless (eq name "influence")}}
            <details class="rt-char-item">
                <summary class="rt-char-summary {{#if (gt this.originPathModifier 0)}}rt-char-bonus{{/if}}{{#if (lt this.originPathModifier 0)}}rt-char-penalty{{/if}}">
                    <span
                        class="rt-char-name roll-characteristic actor-drag"
                        data-item-type="characteristic"
                        data-item-id="{{name}}"
                        data-characteristic="{{name}}"
                        data-tooltip
                        aria-label="{{this.label}}: {{this.total}}"
                        data-rt-tooltip="characteristic"
                        data-rt-tooltip-data="{{this.tooltipData}}"
                    >{{this.short}}</span>
                    <button 
                        type="button" 
                        class="rt-stat-breakdown-btn"
                        data-action="showStatBreakdown"
                        data-stat-key="{{name}}"
                        title="Show stat breakdown">
                        <i class="fa-solid fa-calculator"></i>
                    </button>
                    <span class="rt-char-total" title="Current total">{{this.total}}</span>
                </summary>
                <div class="rt-char-controls">
                    <label class="rt-char-field">
                        <span class="rt-char-field-label">Advances</span>
                        <select name="system.characteristics.{{name}}.advance" title="Characteristic advancement level">
                            {{option "0" this.advance "None (+0)"}}
                            {{option "1" this.advance "Simple (+5)"}}
                            {{option "2" this.advance "Intermediate (+10)"}}
                            {{option "3" this.advance "Trained (+15)"}}
                            {{option "4" this.advance "Proficient (+20)"}}
                            {{option "5" this.advance "Expert (+25)"}}
                        </select>
                    </label>
                    <label class="rt-char-field">
                        <span class="rt-char-field-label">Unnatural</span>
                        <select name="system.characteristics.{{name}}.unnatural" class="rt-unnatural-select" data-dtype="Number" title="Unnatural characteristic multiplier">
                            <option value="0" {{#if (eq this.unnatural 0)}}selected{{/if}}>None</option>
                            <option value="2" {{#if (eq this.unnatural 2)}}selected{{/if}}>×2</option>
                            <option value="3" {{#if (eq this.unnatural 3)}}selected{{/if}}>×3</option>
                            <option value="4" {{#if (eq this.unnatural 4)}}selected{{/if}}>×4</option>
                        </select>
                    </label>
                    <label class="rt-char-field">
                        <span class="rt-char-field-label">Modifier</span>
                        <input
                            type="number"
                            name="system.characteristics.{{name}}.modifier"
                            data-dtype="Number"
                            value="{{this.modifier}}"
                            min="-100"
                            max="100"
                            title="Additional bonus or penalty to this characteristic"
                        />
                    </label>
                </div>
            </details>
            {{/unless}}
        {{/each}}
    </div>
</div>
