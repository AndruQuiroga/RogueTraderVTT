{{!-- Simplified Experience Panel --}}
<div class="rt-panel rt-experience-panel-v2">

    {{!-- Panel Header --}}
    <div class="rt-panel-header rt-panel-header--clickable sheet-control__hide-control"
         data-toggle="experience_details"
         title="Click to {{#if (isExpanded 'experience_details' actor)}}collapse{{else}}expand{{/if}}">
        <span class="rt-panel-title">
            <i class="fas fa-graduation-cap"></i> Experience
        </span>
        <i class="fas fa-chevron-down rt-panel-chevron {{#if (isExpanded 'experience_details' actor)}}rt-panel-chevron--open{{/if}}"></i>
    </div>

    {{!-- Panel Body --}}
    <div class="rt-panel-body">

        {{!-- Compact XP Display - Single horizontal line --}}
        <div class="rt-xp-compact-display">
            {{!-- Progress Ring --}}
            <div class="rt-xp-ring-inline">
                <svg viewBox="0 0 100 100" class="rt-xp-ring-svg">
                    {{!-- Background circle --}}
                    <circle cx="50" cy="50" r="45" 
                            fill="none" 
                            stroke="rgba(120, 46, 34, 0.2)" 
                            stroke-width="10"/>
                    {{!-- Progress circle --}}
                    <circle cx="50" cy="50" r="45" 
                            fill="none" 
                            stroke="url(#xpGradient)" 
                            stroke-width="10"
                            stroke-linecap="round"
                            stroke-dasharray="282.74"
                            stroke-dashoffset="{{multiply (subtract 1 (divide actor.system.experience.used actor.system.experience.total)) 282.74}}"
                            class="rt-xp-ring-progress"
                            transform="rotate(-90 50 50)"/>
                    {{!-- Gradient definition --}}
                    <defs>
                        <linearGradient id="xpGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#c08020;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#d09838;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                </svg>
                <div class="rt-xp-ring-percent">
                    {{#if actor.system.experience.total}}{{floor (multiply (divide actor.system.experience.used actor.system.experience.total) 100)}}{{else}}0{{/if}}%
                </div>
            </div>

            {{!-- Available XP Box --}}
            <div class="rt-xp-available-box">
                <span class="rt-xp-available-value">{{system.experience.available}}</span>
                <span class="rt-xp-available-label">Available</span>
            </div>

            {{!-- Visual Buffer --}}
            <span class="rt-xp-separator">|</span>

            {{!-- Spent XP --}}
            <div class="rt-xp-inline-stat">
                <span class="rt-xp-inline-value">{{system.experience.used}}</span>
                <span class="rt-xp-inline-label">Spent</span>
            </div>

            {{!-- Visual Buffer --}}
            <span class="rt-xp-separator">|</span>

            {{!-- Total XP --}}
            <div class="rt-xp-inline-stat">
                <span class="rt-xp-inline-value">{{system.experience.total}}</span>
                <span class="rt-xp-inline-label">Total</span>
            </div>

            {{!-- Visual Buffer --}}
            <span class="rt-xp-separator">|</span>

            {{!-- Add XP Button --}}
            <button type="button"
                    class="rt-xp-add-button-inline"
                    data-action="customXP"
                    title="Add XP">
                <i class="fas fa-plus"></i>
            </button>

            {{!-- Advancement Button --}}
            <button type="button"
                    class="rt-xp-advancement-button"
                    data-action="openAdvancement"
                    title="{{localize 'RT.Advancement.Title'}}">
                <i class="fa-solid fa-arrow-up-big-small"></i>
            </button>
        </div>

        {{!-- Edit Mode (Expandable) --}}
        <div class="rt-panel-details experience_details" {{hideIfNot (isExpanded 'experience_details' actor)}}>

            {{!-- Direct Edit Section --}}
            <div class="rt-xp-edit-section">
                <div class="rt-xp-edit-grid">
                    <label class="rt-edit-field">
                        <span class="rt-edit-label">Total XP Earned</span>
                        <input type="number"
                               data-dtype="Number"
                               class="rt-edit-input"
                               name="system.experience.total"
                               value="{{system.experience.total}}"
                               min="0"
                               placeholder="0" />
                    </label>

                    <label class="rt-edit-field">
                        <span class="rt-edit-label">XP Spent</span>
                        <input type="number"
                               data-dtype="Number"
                               class="rt-edit-input"
                               name="system.experience.used"
                               value="{{system.experience.used}}"
                               min="0"
                               max="{{system.experience.total}}"
                               placeholder="0" />
                    </label>
                </div>
            </div>

            {{!-- Info Section --}}
            <div class="rt-xp-info-section">
                <div class="rt-xp-info-box">
                    <i class="fas fa-book"></i>
                    <div class="rt-info-content">
                        <strong>About Experience Points</strong>
                        <p>Spend XP to improve characteristics, acquire skills and talents, or gain psychic powers. Costs vary based on the advancement being purchased.</p>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
