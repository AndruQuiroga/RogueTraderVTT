<div class="rt-panel spacer rt-grid-col-2 rt-grid-row-1 rt-vitals-panel rt-wounds-panel">
    <div class="rt-vitals-header">
        <h1 class="rt-vitals-title">Wounds</h1>
        <div class="rt-vitals-meta">Max {{system.wounds.max}}</div>
    </div>
    
    {{!-- Wounds Tracker Section --}}
    <div class="rt-vitals-body">
        <div class="rt-vitals-display">
            <div class="rt-vitals-value">{{system.wounds.value}}</div>
            <div class="rt-vitals-max">/ {{system.wounds.max}}</div>
        </div>
        <progress class="rt-vitals-progress" value="{{system.wounds.value}}" max="{{system.wounds.max}}"></progress>
        <div class="rt-vitals-edit">
            <label class="rt-vitals-field">
                <span class="rt-vitals-label">Max</span>
                <input type="number" data-dtype="Number" class="rt-field__input" name="system.wounds.max" value="{{system.wounds.max}}" />
            </label>
            <label class="rt-vitals-field">
                <span class="rt-vitals-label">Current</span>
                <div class="rt-tracker-input-row">
                    <button type="button" class="rt-tracker-btn rt-tracker-down" data-field="system.wounds.value" data-action="decrement" data-min="0">−</button>
                    <input type="number" data-dtype="Number" class="rt-field__input rt-tracker-input" name="system.wounds.value" value="{{system.wounds.value}}" />
                    <button type="button" class="rt-tracker-btn rt-tracker-up" data-field="system.wounds.value" data-action="increment">+</button>
                </div>
            </label>
        </div>
        <div class="rt-critical-section">
            <div class="rt-critical-header">
                <span class="rt-critical-title">Critical</span>
                <span class="rt-critical-meta">Max 10</span>
            </div>
            <div class="rt-crit-bar">
                {{#each (array 1 2 3 4 5 6 7 8 9 10)}}
                    <div class="rt-crit-pip {{#if (lte this ../system.wounds.critical)}}rt-crit-pip--filled{{/if}}" data-crit-level="{{this}}"></div>
                {{/each}}
            </div>
            <div class="rt-tracker-input-row">
                <button type="button" class="rt-tracker-btn rt-tracker-down" data-field="system.wounds.critical" data-action="decrement" data-min="0">−</button>
                <input type="number" data-dtype="Number" class="rt-field__input rt-tracker-input rt-crit-input" name="system.wounds.critical" value="{{clampCritical system.wounds.critical}}" min="0" max="10" />
                <button type="button" class="rt-tracker-btn rt-tracker-up" data-field="system.wounds.critical" data-action="increment" data-max="10">+</button>
            </div>
        </div>
    </div>

    <div class="rt-table--border rt-criticalinjurytable--border">
        <div class="table-row--head">
            <div class="table-cell--span2">Critical Injuries</div>
            <div class="table-cell--last">
                <label class="rt-control-button item-create" data-type="criticalInjury">
                    <span class="rt-control-button__span material-icons">{{defaultVal icon 'add_circle'}}</span>
                </label>
            </div>
        </div>
        {{#each actor.items as | item |}}
            {{#if item.isCriticalInjury}}
                <div class="table-row">
                    <div class="table-cell--settingstoggle">
                        <label class="rt-control-button item-edit" data-item-id="{{item.id}}">
                            <span class="rt-control-button__span material-icons">{{defaultVal icon 'settings'}}</span>
                        </label>
                    </div>
                    <div class="table-cell">
                        {{> systems/rogue-trader/templates/actor/partial/trait-toggle.hbs toggle=(concat 'description_' item.id) text=item.name}}
                    </div>
                    <div class="table-cell">
                        <label class="rt-control-button item-delete" data-item-id="{{item.id}}">
                            <span class="rt-control-button__span material-icons">{{defaultVal icon 'delete'}}</span>
                        </label>
                    </div>
                    <div class="table-cell--description description_{{item.id}}" {{hideIfNot
                        (isExpanded (concat 'description_' item.id ))}}>
                        <span>{{item.system.description}}</span>
                    </div>
                </div>
            {{/if}}
        {{/each}}
    </div>
</div>
