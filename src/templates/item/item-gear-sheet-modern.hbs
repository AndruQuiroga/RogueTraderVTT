<div class="rt-item-sheet">
    <form autocomplete="off">
        <!-- Item Header -->
        <header class="rt-item-header">
            <div class="rt-item-image" data-edit="img">
                <img src="{{item.img}}" alt="{{item.name}}" title="{{item.name}}" />
            </div>
            
            <div class="rt-item-title">
                <input type="text" class="rt-item-title__name" name="name" value="{{item.name}}" placeholder="Gear Name" />
                <div class="rt-item-title__type">
                    <i class="fas fa-briefcase"></i>
                    <span>Equipment</span>
                </div>
                <div class="rt-item-meta">
                    {{#if item.system.craftsmanship}}
                    <span class="rt-meta-badge rt-meta-badge--craft">
                        <i class="fas fa-hammer"></i> {{item.system.craftsmanship}}
                    </span>
                    {{/if}}
                    {{#if item.system.availability}}
                    <span class="rt-meta-badge rt-meta-badge--availability">
                        <i class="fas fa-store"></i> {{item.system.availability}}
                    </span>
                    {{/if}}
                    {{#if item.system.source}}
                    <span class="rt-meta-badge rt-meta-badge--source">
                        <i class="fas fa-book"></i> {{item.system.source}}
                    </span>
                    {{/if}}
                </div>
            </div>
        </header>

        <!-- Quick Stats Bar -->
        <div class="rt-quick-stats">
            {{#if item.system.availability}}
            <div class="rt-stat-badge">
                <span class="rt-stat-badge__icon"><i class="fas fa-store"></i></span>
                <span class="rt-stat-badge__label">AVAIL</span>
                <span class="rt-stat-badge__value">{{item.system.availability}}</span>
            </div>
            {{/if}}
            
            {{#if item.system.craftsmanship}}
            <div class="rt-stat-badge">
                <span class="rt-stat-badge__icon"><i class="fas fa-hammer"></i></span>
                <span class="rt-stat-badge__label">CRAFT</span>
                <span class="rt-stat-badge__value">{{item.system.craftsmanship}}</span>
            </div>
            {{/if}}
            
            <div class="rt-stat-badge">
                <span class="rt-stat-badge__icon"><i class="fas fa-weight-hanging"></i></span>
                <span class="rt-stat-badge__label">WT</span>
                <span class="rt-stat-badge__value">{{item.system.weight}}</span>
            </div>
            
            {{#if item.system.backpack.inBackpack}}
            <div class="rt-stat-badge rt-stat-badge--muted">
                <span class="rt-stat-badge__icon"><i class="fas fa-suitcase"></i></span>
                <span class="rt-stat-badge__value">STOWED</span>
            </div>
            {{/if}}
        </div>

        <!-- Tab Navigation -->
        <nav class="rt-tabs" data-group="primary">
            <a class="rt-tab active" data-tab="details" data-group="primary">
                <i class="fas fa-info-circle"></i> Details
            </a>
            <a class="rt-tab" data-tab="effects" data-group="primary">
                <i class="fas fa-magic"></i> Effects
            </a>
        </nav>

        <!-- Tab Content -->
        <section class="rt-tab-content">
            <!-- Details Tab -->
            <div class="tab active" data-tab="details" data-group="primary">
                <div class="rt-panel">
                    <div class="rt-panel__header">
                        <h3><i class="fas fa-briefcase"></i> Item Properties</h3>
                    </div>
                    <div class="rt-panel__content">
                        <div class="rt-field-grid rt-field-grid--4">
                            <div class="rt-field">
                                <label class="rt-field__label">Availability</label>
                                <select class="rt-field__select" name="system.availability">
                                    {{selectOptions (arrayToObject dh.items.availability) selected=item.system.availability}}
                                </select>
                            </div>
                            <div class="rt-field">
                                <label class="rt-field__label">Craftsmanship</label>
                                <select class="rt-field__select" name="system.craftsmanship">
                                    {{selectOptions (arrayToObject dh.items.craftsmanship) selected=item.system.craftsmanship}}
                                </select>
                            </div>
                            <div class="rt-field">
                                <label class="rt-field__label">Weight (kg)</label>
                                <input type="number" class="rt-field__input" name="system.weight" value="{{item.system.weight}}" step="0.1" />
                            </div>
                            <div class="rt-field">
                                <label class="rt-field__label">Source</label>
                                <input type="text" class="rt-field__input" name="system.source" value="{{item.system.source}}" />
                            </div>
                        </div>
                        
                        <div style="margin-top: 1rem;">
                            <label class="rt-field__checkbox">
                                <input type="checkbox" name="system.backpack.inBackpack" {{checked item.system.backpack.inBackpack}} />
                                <span>In Backpack (not carried on person)</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="rt-panel">
                    <div class="rt-panel__header">
                        <h3><i class="fas fa-scroll"></i> Description</h3>
                    </div>
                    <div class="rt-panel__content">
                        <div class="rt-description">
                            {{editor item.system.description.value target="system.description.value" button=true editable=true engine="prosemirror"}}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Effects Tab -->
            <div class="tab" data-tab="effects" data-group="primary">
                {{> systems/rogue-trader/templates/item/panel/active-effects-panel.hbs}}
            </div>
        </section>
    </form>
</div>
