================================================================================
  SHIP ROLES DATA TRANSFORMATION MAP
================================================================================

CURRENT STATE (BROKEN)                    TARGET STATE (V13 COMPLIANT)
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PACK DATA (Legacy)              â”‚      â”‚ PACK DATA (Migrated)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚      â”‚                                 â”‚
â”‚ careerPreferences: STRING       â”‚ â”€â”€â”€â†’ â”‚ careerPreferences: ARRAY        â”‚
â”‚   "Usually Explorator,          â”‚      â”‚   ["Explorator", "Seneschal",   â”‚
â”‚    any but Missionary"          â”‚      â”‚    "Arch-Militant", ...]        â”‚
â”‚                                 â”‚      â”‚                                 â”‚
â”‚                                 â”‚      â”‚ careerNote: STRING              â”‚
â”‚                                 â”‚      â”‚   "Typically Explorator"        â”‚
â”‚                                 â”‚      â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚      â”‚                                 â”‚
â”‚ subordinates: STRING            â”‚ â”€â”€â”€â†’ â”‚ subordinates: ARRAY             â”‚
â”‚   "Tech-Priests, Arch-Magi,     â”‚      â”‚   ["Tech-Priests",              â”‚
â”‚    and Lesser Enginseers."      â”‚      â”‚    "Arch-Magi",                 â”‚
â”‚                                 â”‚      â”‚    "Lesser Enginseers"]         â”‚
â”‚                                 â”‚      â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚      â”‚                                 â”‚
â”‚ importantSkills: STRING         â”‚ â”€â”€â”€â†’ â”‚ importantSkills: ARRAY          â”‚
â”‚   "Tech-Use, Chem-Use,          â”‚      â”‚   [{name: "Tech-Use",           â”‚
â”‚    Common Lore (Machine Cult)"  â”‚      â”‚     specialization: ""},        â”‚
â”‚                                 â”‚      â”‚    {name: "Common Lore",        â”‚
â”‚                                 â”‚      â”‚     specialization:             â”‚
â”‚                                 â”‚      â”‚       "Machine Cult"}]          â”‚
â”‚                                 â”‚      â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚      â”‚                                 â”‚
â”‚ effect: STRING (legacy)         â”‚ â”€â”€â”€â†’ â”‚ abilities: ARRAY (structured)   â”‚
â”‚   "+10 to Emergency Repairs     â”‚      â”‚   [{                            â”‚
â”‚    Extended Actions"            â”‚      â”‚     name: "Emergency Repairs    â”‚
â”‚                                 â”‚      â”‚           Expertise",           â”‚
â”‚                                 â”‚      â”‚     bonus: 10,                  â”‚
â”‚                                 â”‚      â”‚     action: "Emergency Repairs",â”‚
â”‚                                 â”‚      â”‚     actionType: "extended"      â”‚
â”‚                                 â”‚      â”‚   }]                            â”‚
â”‚                                 â”‚      â”‚                                 â”‚
â”‚                                 â”‚      â”‚ effect: STRING (kept for compat)â”‚
â”‚                                 â”‚      â”‚   "+10 to Emergency Repairs..." â”‚
â”‚                                 â”‚      â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚      â”‚                                 â”‚
â”‚ shipBonuses: {                  â”‚ â”€â”€â”€â†’ â”‚ shipBonuses: {                  â”‚
â”‚   crewRating: 0,                â”‚      â”‚   crewRating: 5,  â—„â”€â”€ EXTRACTED â”‚
â”‚   detection: 0,                 â”‚      â”‚   detection: 0,                 â”‚
â”‚   ballisticSkill: 0,            â”‚      â”‚   ballisticSkill: 0,            â”‚
â”‚   manoeuvrability: 0            â”‚      â”‚   manoeuvrability: 0            â”‚
â”‚ }                               â”‚      â”‚ }                               â”‚
â”‚ â–² ALL ZEROS (unused)            â”‚      â”‚ â–² POPULATED from effect text    â”‚
â”‚                                 â”‚      â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================

DISPLAY TRANSFORMATION
================================================================================

BEFORE (BROKEN):                         AFTER (WORKING):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

get careerPreferencesLabel() {           get careerPreferencesLabel() {
  // this.careerPreferences is STRING      // this.careerPreferences is ARRAY
  return this.careerPreferences            if (Array.isArray(...)) {
    .join(", ");                             return careers.join(", ");
  // âŒ Tries to call .join() on string    }
  // Result: [object Object]                return "-"; // or legacy string
}                                        }
                                         // âœ… Returns: "Explorator, Seneschal,
                                         //            Arch-Militant, ..."

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

TEMPLATE (ship-role-panel.hbs):         TEMPLATE (ship-role-panel.hbs):
                                        
{{role.system.careerPreferences}}        {{role.system.careerPreferencesLabel}}
// Shows: [object Object]                // Shows: "Explorator, Seneschal, ..."

{{role.system.subordinates}}             {{role.system.subordinatesLabel}}
// Shows: [object Object]                // Shows: "Tech-Priests, Arch-Magi, ..."

{{role.system.importantSkills}}          {{role.system.importantSkillsLabel}}
// Shows: [object Object]                // Shows: "Tech-Use, Common Lore
                                         //         (Machine Cult), ..."

{{role.system.effect}}                   {{#each role.system.abilities}}
// Shows: "+10 to Emergency Repairs"       <div class="ability">
                                             <span>{{name}}</span>
                                             {{#if bonus}}
                                               <span class="bonus">
                                                 +{{bonus}}
                                               </span>
                                             {{/if}}
                                           </div>
                                         {{/each}}
                                         // Shows structured ability cards
                                         // with bonuses, actions, etc.

================================================================================

MIGRATION FLOW
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 22 Ship Role     â”‚
â”‚ JSON files       â”‚
â”‚ (Legacy format)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ scripts/migrate-ship-roles.mjs                 â”‚
â”‚                                                â”‚
â”‚  1. Read all 22 files                          â”‚
â”‚  2. Parse career strings â†’ arrays              â”‚
â”‚  3. Parse subordinate strings â†’ arrays         â”‚
â”‚  4. Parse skill strings â†’ structured arrays    â”‚
â”‚  5. Extract abilities from effect text         â”‚
â”‚  6. Extract ship bonuses from effect text      â”‚
â”‚  7. Write migrated JSON back to files          â”‚
â”‚                                                â”‚
â”‚  Flags: --dry-run --verbose                    â”‚
â”‚  Backup: automatic timestamped backup          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 22 Ship Role     â”‚
â”‚ JSON files       â”‚
â”‚ (V13 format)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DataModel: ship-role.mjs                       â”‚
â”‚                                                â”‚
â”‚  migrateData() handles:                        â”‚
â”‚    â€¢ String â†’ Array conversions (if needed)    â”‚
â”‚    â€¢ Effect â†’ Abilities extraction             â”‚
â”‚    â€¢ Backward compatibility with legacy data   â”‚
â”‚                                                â”‚
â”‚  Display getters:                              â”‚
â”‚    â€¢ careerPreferencesLabel (array â†’ string)   â”‚
â”‚    â€¢ subordinatesLabel (array â†’ string)        â”‚
â”‚    â€¢ importantSkillsLabel (array â†’ string)     â”‚
â”‚    â€¢ shipBonusesArray (object â†’ array)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Templates: ship-role-panel.hbs                 â”‚
â”‚                                                â”‚
â”‚  Uses display getters for readable output:     â”‚
â”‚    {{role.system.careerPreferencesLabel}}      â”‚
â”‚    {{role.system.subordinatesLabel}}           â”‚
â”‚    {{role.system.importantSkillsLabel}}        â”‚
â”‚                                                â”‚
â”‚  Iterates over structured abilities:           â”‚
â”‚    {{#each role.system.abilities}}             â”‚
â”‚      <ability card with bonus badges>          â”‚
â”‚    {{/each}}                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RESULT: Clean, readable UI                     â”‚
â”‚                                                â”‚
â”‚  âœ… No [object Object] displays                â”‚
â”‚  âœ… Career preferences as readable text        â”‚
â”‚  âœ… Subordinates as readable text              â”‚
â”‚  âœ… Skills with specializations formatted      â”‚
â”‚  âœ… Structured ability cards with bonuses      â”‚
â”‚  âœ… Ship bonus badges (+5, +10, etc.)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================

EXAMPLE TRANSFORMATION (Enginseer Prime)
================================================================================

INPUT (Legacy Pack Data):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  "name": "Enginseer Prime",
  "type": "shipRole",
  "system": {
    "rank": 2,
    "purpose": "Leads Mechanicus Contingent, directs vessel maintenance.",
    "careerPreferences": "Usually Explorator, any but Missionary/Void-Master.",
    "subordinates": "Ship Tech-Priests, Arch-Magi, and Lesser Enginseers.",
    "importantSkills": "Tech-Use, Chem-Use, Common Lore (Machine Cult), Forbidden Lore (Mechanicus)",
    "effect": "+10 to Emergency Repairs Extended Actions",
    "skillBonuses": {},
    "shipBonuses": { "manoeuvrability": 0, "detection": 0, "ballisticSkill": 0, "crewRating": 0 }
  }
}

OUTPUT (Migrated Pack Data):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  "name": "Enginseer Prime",
  "type": "shipRole",
  "system": {
    "rank": 2,
    "purpose": "Leads Mechanicus Contingent, directs vessel maintenance.",
    "careerPreferences": [
      "Rogue Trader",
      "Arch-Militant",
      "Astropath Transcendent",
      "Explorator",
      "Navigator",
      "Seneschal"
    ],
    "careerNote": "Typically Explorator",
    "subordinates": [
      "Ship Tech-Priests",
      "Arch-Magi",
      "Lesser Enginseers"
    ],
    "importantSkills": [
      { "name": "Tech-Use", "specialization": "" },
      { "name": "Chem-Use", "specialization": "" },
      { "name": "Common Lore", "specialization": "Machine Cult" },
      { "name": "Forbidden Lore", "specialization": "Mechanicus" }
    ],
    "abilities": [
      {
        "name": "Emergency Repairs Expertise",
        "description": "<p>+10 to Emergency Repairs Extended Actions</p>",
        "bonus": 10,
        "action": "Emergency Repairs",
        "actionType": "extended"
      }
    ],
    "effect": "+10 to Emergency Repairs Extended Actions",
    "skillBonuses": {},
    "shipBonuses": { "manoeuvrability": 0, "detection": 0, "ballisticSkill": 0, "crewRating": 0 }
  }
}

DISPLAY (Character Sheet):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Enginseer Prime                                                   R2 ğŸ—‘ï¸ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Purpose: Leads Mechanicus Contingent, directs vessel maintenance.      â”‚
â”‚                                                                         â”‚
â”‚ Career Preferences: Typically Explorator; Rogue Trader, Arch-Militant, â”‚
â”‚   Astropath Transcendent, Explorator, Navigator, Seneschal             â”‚
â”‚                                                                         â”‚
â”‚ Subordinates: Ship Tech-Priests, Arch-Magi, Lesser Enginseers          â”‚
â”‚                                                                         â”‚
â”‚ Important Skills: Tech-Use, Chem-Use, Common Lore (Machine Cult),      â”‚
â”‚   Forbidden Lore (Mechanicus)                                           â”‚
â”‚                                                                         â”‚
â”‚ Abilities:                                                              â”‚
â”‚   â€¢ Emergency Repairs Expertise [+10]                                   â”‚
â”‚     +10 to Emergency Repairs Extended Actions                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… All text readable, no [object Object]

================================================================================
